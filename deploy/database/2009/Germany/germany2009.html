<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Database</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="germany2009.css" rel="stylesheet">
    
    <!--<a id="pagetitle">Germany 2009 </a> -->
</head>
<body>
    <div class="container mt-3">
        <table class="table table-dark">
            <thead>
                <th>QID</th>
                <th>English Questions</th>
                <th>German Questions</th>
            </thead>
            <tbody id="tbody1"></tbody>
        </table> 
    </div>


    <script type="module">
        //https://www.youtube.com/watch?v=KnAsYNhI_CY
        //javascript part to fill in the table

        var QID = 0;
        var tbody = document.getElementById('tbody1');

        function AddItemToTable(english, foreign) {
            let trow = document.createElement("tr");
            let td1 = document.createElement('td');
            let td2 = document.createElement('td');
            let td3 = document.createElement('td');

            td1.innerHTML= ++QID;
            td2.innerHTML= english;
            td3.innerHTML= foreign;


            trow.appendChild(td1);
            trow.appendChild(td2);
            trow.appendChild(td3);

            tbody.appendChild(trow);
           // body.appendChild(trow);
        }

        
    


        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyASZ59fobXr6ovy8QQUX2mogFso22v5nQM",
    authDomain: "measuredb.firebaseapp.com",
    databaseURL: "https://measuredb-default-rtdb.firebaseio.com",
    projectId: "measuredb",
    storageBucket: "measuredb.appspot.com",
    messagingSenderId: "298611251603",
    appId: "1:298611251603:web:0d236cfa7d1926a552f066"
  };
    

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
        import { getDatabase, ref, child, onValue, get }
        from "https://www.gstatic.com/firebasejs/9.6.11/firebase-database.js";
        const db = getDatabase();

         //adding items to the table
        function AddAllItemsToTable(QuestionIDs, Italy){ 
            QID =0;
            tbody.innerHTML="";
            QuestionIDs.forEach(element => {
                AddItemToTable(element)
            });
        }
        function AddAllItemsToTable2(Italy){ 
            QID =0;
            tbody.innerHTML="";
            Italy.forEach(element => {
                AddItemToTable(element)
            });
        }
        //getting data once
        function GetAllDataOnce() {
            const dbRef = ref(db);

            get(child(dbRef, "QuestionIDs"))
            .then((snapshot)=>{
                var questions =[];
                
                snapshot.forEach(childSnapshot => {
                    questions.push(childSnapshot.val());
                });
                AddAllItemsToTable(questions);
            });
            get(child(dbRef, "Italy"))
            .then((snapshot)=>{
                var questions2 =[];
                
                snapshot.forEach(childSnapshot => {
                    questions2.push(childSnapshot.val());
                });
                AddAllItemsToTable2(questions2);
            });
        }


        window.onload = GetAllDataOnce; 
    </script>
</body>
</html>